<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Калькулятор обмена</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f7f1e9;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  .calculator {
    background: white;
    border-radius: 10px;
    padding: 30px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    width: 350px;
  }
  .calculator h1 {
    margin-bottom: 20px;
    font-size: 24px;
  }
  .row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
  }
  label {
    font-weight: bold;
    margin-bottom: 5px;
    display: block;
  }
  input[type="number"] {
    width: 48%;
    padding: 8px;
    font-size: 16px;
    box-sizing: border-box;
  }
  .profit-row {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
  }
  .profit {
    font-weight: bold;
  }
  .comments {
    margin-top: 20px;
    font-size: 12px;
    color: #555;
  }
  .direction-toggle {
    margin-bottom: 15px;
  }
  .direction-toggle button {
    padding: 6px 15px;
    margin-right: 10px;
    border: none;
    border-radius: 5px;
    background: #eee;
    cursor: pointer;
  }
  .direction-toggle button.active {
    background: #f39c12;
    color: white;
  }
</style>
</head>
<body>

<div class="calculator">
  <h1>Калькулятор обмена</h1>

  <div class="direction-toggle">
    <button id="rToY" class="active">₽ ⇒ 元</button>
    <button id="yToR">元 ⇒ ₽</button>
  </div>

  <div class="row">
    <div>
      <label for="yourRate">Ваш курс</label>
      <input type="number" id="yourRate" value="11.2" step="0.01" />
    </div>
    <div>
      <label for="clientRate">Клиентский курс</label>
      <input type="number" id="clientRate" value="11.8" step="0.01" />
    </div>
  </div>

  <div class="row">
    <div>
      <label for="clientGive">Клиент отдаст</label>
      <input type="number" id="clientGive" value="100000" step="0.01" />
    </div>
    <div>
      <label for="clientGet">Клиент получит</label>
      <input type="number" id="clientGet" value="" step="0.01" />
    </div>
  </div>

  <div class="profit-row">
    <div>Ваша прибыль (₽): <span id="profitR">0</span></div>
    <div>Ваша прибыль (元): <span id="profitY">0</span></div>
  </div>

  <div class="comments">
    <div>Здравствуйте, сегодняшний курс: <span id="currentRate">11.8</span></div>
    <div>Сумма обмена: <span id="exchangeSum">0</span> 元</div>
    <div>Сумма отправки: <span id="sendSum">0</span> ₽</div>
    <div>Реквизиты: +7(981)807-18-99, Юй Ц.</div>
  </div>
</div>

<script>
  const rToYBtn = document.getElementById('rToY');
  const yToRBtn = document.getElementById('yToR');
  const yourRateInput = document.getElementById('yourRate');
  const clientRateInput = document.getElementById('clientRate');
  const clientGiveInput = document.getElementById('clientGive');
  const clientGetInput = document.getElementById('clientGet');
  const profitRElem = document.getElementById('profitR');
  const profitYElem = document.getElementById('profitY');
  const currentRateElem = document.getElementById('currentRate');
  const exchangeSumElem = document.getElementById('exchangeSum');
  const sendSumElem = document.getElementById('sendSum');

  let direction = 'rToY'; // направление обмена

  function calculateFromGive() {
    const yourRate = parseFloat(yourRateInput.value) || 0;
    const clientRate = parseFloat(clientRateInput.value) || 0;
    const clientGive = parseFloat(clientGiveInput.value) || 0;

    let clientGet = 0;
    let profitR = 0;
    let profitY = 0;

    if (direction === 'rToY') {
      clientGet = clientGive / clientRate;
      profitR = clientGive - clientGet * yourRate;
      profitY = (profitR / yourRate) || 0;
    } else {
      clientGet = clientGive * clientRate;
      profitY = clientGet - clientGive / yourRate;
      profitR = (profitY * yourRate) || 0;
    }

    clientGetInput.value = clientGet.toFixed(2);
    profitRElem.textContent = profitR.toFixed(2);
    profitYElem.textContent = profitY.toFixed(2);
    currentRateElem.textContent = clientRate.toFixed(2);
    exchangeSumElem.textContent = clientGet.toFixed(2);
    sendSumElem.textContent = clientGive.toFixed(2);
  }

  function calculateFromGet() {
    const yourRate = parseFloat(yourRateInput.value) || 0;
    const clientRate = parseFloat(clientRateInput.value) || 0;
    const clientGet = parseFloat(clientGetInput.value) || 0;

    let clientGive = 0;
    let profitR = 0;
    let profitY = 0;

    if (direction === 'rToY') {
      clientGive = clientGet * clientRate;
      profitR = clientGive - clientGet * yourRate;
      profitY = (profitR / yourRate) || 0;
    } else {
      clientGive = clientGet / clientRate;
      profitY = clientGet - clientGive / yourRate;
      profitR = (profitY * yourRate) || 0;
    }

    clientGiveInput.value = clientGive.toFixed(2);
    profitRElem.textContent = profitR.toFixed(2);
    profitYElem.textContent = profitY.toFixed(2);
    currentRateElem.textContent = clientRate.toFixed(2);
    exchangeSumElem.textContent = clientGet.toFixed(2);
    sendSumElem.textContent = clientGive.toFixed(2);
  }

  clientGiveInput.addEventListener('input', () => {
    calculateFromGive();
  });

  clientGetInput.addEventListener('input', () => {
    calculateFromGet();
  });

  yourRateInput.addEventListener('input', () => {
    if (clientGiveInput.value) calculateFromGive();
  });

  clientRateInput.addEventListener('input', () => {
    if (clientGiveInput.value) calculateFromGive();
  });

  rToYBtn.addEventListener('click', () => {
    direction = 'rToY';
    rToYBtn.classList.add('active');
    yToRBtn.classList.remove('active');
    calculateFromGive();
  });

  yToRBtn.addEventListener('click', () => {
    direction = 'yToR';
    yToRBtn.classList.add('active');
    rToYBtn.classList.remove('active');
    calculateFromGive();
  });

  // Инициализация
  calculateFromGive();

</script>

</body>
</html>
